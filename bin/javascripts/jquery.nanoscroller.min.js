/*! nanoScrollerJS v0.7.2 (c) 2013 James Florentino; Licensed MIT */

(function(e,t,n){"use strict";var r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k;C={paneClass:"pane",paneClassY:"pane-y",paneClassX:"pane-x",sliderClass:"slider",sliderClassY:"slider-y",sliderClassX:"slider-x",contentClass:"content",iOSNativeScrolling:!1,preventPageScrolling:!1,disableResize:!1,alwaysVisible:!1,flashDelay:1500,sliderMinHeight:20,sliderMaxHeight:null},S="scrollbar",E="scroll",h="mousedown",p="mousemove",v="mousewheel",d="mouseup",b="resize",a="drag",T="up",g="panedown",c="left",y="paneright",o="DOMMouseScroll",u="down",w="right",N="wheel",f="keydown",l="keyup",x="touchmove",r=t.navigator.appName==="Microsoft Internet Explorer"&&/msie 7./i.test(t.navigator.appVersion)&&t.ActiveXObject,s=null,i=null,k=function(){var e,t,r,i;return e=n.createElement("div"),t=e.style,t.position="absolute",t.width="100px",t.height="100px",t.overflow=E,t.top="-9999px",n.body.appendChild(e),i=e.offsetWidth-e.clientWidth,r=e.offsetHeight-e.clientHeight,n.body.removeChild(e),[i,r]},m=function(){function f(r,o){var u;this.el=r,this.options=o;if(!s||!i)u=k(),s=u[0],i=u[1];this.$el=e(this.el),this.doc=e(n),this.win=e(t),this.$content=this.$el.children("."+o.contentClass),this.$content.attr("tabindex",0),this.content=this.$content[0],this.options.iOSNativeScrolling&&this.el.style.WebkitOverflowScrolling!=null?this.nativeScrolling():this.generate(),this.createEvents(),this.addEvents(),this.reset()}return f.prototype.preventVerticalScrolling=function(e,t){if(!this.isActiveY)return;if(e.type===o)(t===u&&e.originalEvent.detail>0||t===T&&e.originalEvent.detail<0)&&e.preventDefault();else if(e.type===v){if(!e.originalEvent||!e.originalEvent.wheelDelta)return;(t===u&&e.originalEvent.wheelDelta<0||t===T&&e.originalEvent.wheelDelta>0)&&e.preventDefault()}},f.prototype.preventHorizontalScrolling=function(e,t){if(!this.isActiveX)return;if(e.type===o)(t===w&&e.originalEvent.detail>0||t===c&&e.originalEvent.detail<0)&&e.preventDefault();else if(e.type===v){if(!e.originalEvent||!e.originalEvent.wheelDelta)return;(t===w&&e.originalEvent.wheelDelta<0||t===c&&e.originalEvent.wheelDelta>0)&&e.preventDefault()}},f.prototype.nativeScrolling=function(){this.$content.css({WebkitOverflowScrolling:"touch"}),this.iOSNativeScrolling=!0,this.isActiveX=!0,this.isActiveY=!0},f.prototype.updateVerticalScrollValues=function(){var e;e=this.content,this.maxScrollTop=e.scrollHeight-e.clientHeight,this.contentScrollTop=e.scrollTop,this.iOSNativeScrolling||(this.maxSliderTop=this.yPaneHeight-this.ySliderHeight,this.ySliderTop=this.contentScrollTop*this.maxSliderTop/this.maxScrollTop)},f.prototype.updateHorizontalScrollValues=function(){var e;e=this.content,this.maxScrollLeft=e.scrollWidth-e.clientWidth,this.contentScrollLeft=e.scrollLeft,this.iOSNativeScrolling||(this.maxSliderLeft=this.xPaneWidth-this.xSliderWidth,this.xSliderLeft=this.contentScrollLeft*this.maxSliderLeft/this.maxScrollLeft)},f.prototype.createEvents=function(){var e=this;this.yEvents={down:function(t){return e.isYBeingDragged=!0,e.offsetY=t.pageY-e.ySlider.offset().top,e.yPane.addClass("active"),e.doc.bind(p,e.yEvents[a]).bind(d,e.yEvents[T]),!1},drag:function(t){return e.ySliderY=t.pageY-e.$el.offset().top-e.offsetY,e.scrollY(),e.updateVerticalScrollValues(),e.contentScrollTop>=e.maxScrollTop?e.$el.trigger("scrollend"):e.contentScrollTop===0&&e.$el.trigger("scrolltop"),!1},up:function(t){return e.isYBeingDragged=!1,e.yPane.removeClass("active"),e.doc.unbind(p,e.yEvents[a]).unbind(d,e.yEvents[T]),!1},resize:function(t){e.reset()},panedown:function(t){return e.ySliderY=(t.offsetY||t.originalEvent.layerY)-e.ySliderHeight*.5,e.scrollY(),e.yEvents.down(t),!1},scroll:function(t){if(e.isYBeingDragged)return;e.updateVerticalScrollValues(),e.iOSNativeScrolling||(e.ySliderY=e.ySliderTop,e.ySlider.css({top:e.ySliderTop}));if(t==null)return;e.contentScrollTop>=e.maxScrollTop?(e.options.preventPageScrolling&&e.preventVerticalScrolling(t,u),e.$el.trigger("scrollend")):e.contentScrollTop===0&&(e.options.preventPageScrolling&&e.preventVerticalScrolling(t,T),e.$el.trigger("scrolltop"))},wheel:function(t){if(t==null)return;return e.ySliderY+=-t.wheelDeltaY||-t.delta,e.scrollY(),!1}},this.xEvents={down:function(t){return e.isXBeingDragged=!0,e.offsetX=t.pageX-e.xSlider.offset().left,e.xPane.addClass("active"),e.doc.bind(p,e.xEvents[a]).bind(d,e.xEvents[T]),!1},drag:function(t){return e.xSliderX=t.pageX-e.$el.offset().left-e.offsetX,e.scrollX(),e.updateHorizontalScrollValues(),e.contentScrollLeft>=e.maxScrollLeft?e.$el.trigger("scrollend"):e.contentScrollLeft===0&&e.$el.trigger("scrollleft"),!1},up:function(t){return e.isXBeingDragged=!1,e.xPane.removeClass("active"),e.doc.unbind(p,e.xEvents[a]).unbind(d,e.xEvents[T]),!1},resize:function(t){e.reset()},panedown:function(t){return e.xSliderX=(t.offsetX||t.originalEvent.layerX)-e.xSliderWidth*.5,e.scrollX(),e.xEvents.down(t),!1},scroll:function(t){if(e.isXBeingDragged)return;e.updateHorizontalScrollValues(),e.iOSNativeScrolling||(e.xSliderX=e.xSliderLeft,e.xSlider.css({left:e.xSliderLeft}));if(t==null)return;e.contentScrollLeft>=e.maxScrollLeft?(e.options.preventPageScrolling&&e.preventHorizontalScrolling(t,w),e.$el.trigger("scrollend")):e.contentScrollLeft===0&&(e.options.preventPageScrolling&&e.preventHorizontalScrolling(t,c),e.$el.trigger("scrollleft"))},wheel:function(t){if(t==null)return;return e.xSliderX+=-t.wheelDeltaX||-t.delta,e.scrollX(),!1}}},f.prototype.addEvents=function(){var e,t;this.removeEvents(),t=this.yEvents,e=this.xEvents,this.options.disableResize||this.win.bind(b,t[b]).bind(b,e[b]),this.iOSNativeScrolling||(this.ySlider.bind(h,t[u]),this.xSlider.bind(h,e[u]),this.yPane.bind(h,t[g]).bind(""+v+" "+o,t[N]),this.xPane.bind(h,e[g]).bind(""+v+" "+o,e[N])),this.$content.bind(""+E+" "+v+" "+o+" "+x,t[E]).bind(""+E+" "+v+" "+o+" "+x,e[E])},f.prototype.removeEvents=function(){var e,t;t=this.yEvents,e=this.xEvents,this.win.unbind(b,t[b]).unbind(b,e[b]),this.iOSNativeScrolling||(this.ySlider.unbind(),this.xSlider.unbind(),this.yPane.unbind(),this.xPane.unbind()),this.$content.unbind(""+E+" "+v+" "+o+" "+x,t[E]).unbind(""+E+" "+v+" "+o+" "+x,e[E])},f.prototype.generate=function(){var e,t,n,r,o,u,a,f,l,c;return r=this.options,o=r.paneClass,a=r.paneClassY,u=r.paneClassX,f=r.sliderClass,c=r.sliderClassY,l=r.sliderClassX,e=r.contentClass,!this.$el.find(""+a).length&&!this.$el.find(""+c).length&&this.$el.append('<div class="'+o+" "+a+'"><div class="'+f+" "+c+'" /></div>'),!this.$el.find(""+u).length&&!this.$el.find(""+l).length&&this.$el.append('<div class="'+o+" "+u+'"><div class="'+f+" "+l+'" /></div>'),this.yPane=this.$el.children("."+a),this.xPane=this.$el.children("."+u),this.ySlider=this.yPane.find("."+c),this.xSlider=this.xPane.find("."+l),s&&(n=this.$el.css("direction")==="rtl"?{left:-s}:{right:-s},this.$el.addClass("has-scrollbar"),this.$content.css(n)),i&&(t={bottom:-i},this.$el.addClass("has-scrollbar"),this.$content.css(t)),this},f.prototype.restore=function(){this.stopped=!1,this.yPane.show(),this.xPane.show(),this.addEvents()},f.prototype.reset=function(){var e,t,n,o,u,a,f,l,c,h,p,d,v,m,g,y;if(this.iOSNativeScrolling){this.contentHeight=this.content.scrollHeight,this.contentWidth=this.content.scrollWidth;return}return this.$el.removeClass("has-scrollbar-x"),this.$el.removeClass("has-scrollbar-y"),!this.$el.find("."+this.options.paneClassY).length&&!this.$el.find("."+this.options.paneClassX).length&&this.generate().stop(),this.stopped&&this.restore(),e=this.content,n=e.style,u=n.overflowY,o=n.overflowX,r&&this.$content.css({height:this.$content.height(),width:this.$content.height()}),t=e.scrollHeight+s,a=e.scrollWidth+i,e.scrollWidth>this.xPane.outerWidth(!0)&&this.$el.addClass("has-scrollbar-x"),e.scrollHeight>this.yPane.outerHeight(!0)&&this.$el.addClass("has-scrollbar-y"),l=this.yPane.outerHeight(),v=parseInt(this.yPane.css("top"),10),f=parseInt(this.yPane.css("bottom"),10),h=l+v+f,m=this.xPane.outerWidth(),c=parseInt(this.xPane.css("left"),10),d=parseInt(this.xPane.css("right"),10),p=m+c+d,g=Math.round(h/t*h),g<this.options.sliderMinHeight?g=this.options.sliderMinHeight:this.options.sliderMaxHeight!=null&&g>this.options.sliderMaxHeight&&(g=this.options.sliderMaxHeight),u===E&&n.overflowX!==E&&(g+=s),y=Math.round(p/a*p),y<this.options.sliderMinWidth?y=this.options.sliderMinWidth:this.options.sliderMaxWidth!=null&&y>this.options.sliderMaxWidth&&(y=this.options.sliderMaxWidth),o===E&&n.overflowY!==E&&(y+=i),this.maxSliderTop=h-g,this.maxSliderLeft=p-y,this.contentHeight=t,this.contentWidth=a,this.yPaneHeight=l,this.xPaneWidth=m,this.yPaneOuterHeight=h,this.xPaneOuterWidth=p,this.ySliderHeight=g,this.xSliderWidth=y,this.ySlider.height(g),this.xSlider.width(y),this.yEvents.scroll(),this.xEvents.scroll(),this.yPane.show(),this.isActiveY=!0,e.scrollHeight===e.clientHeight||this.yPane.outerHeight(!0)>=e.scrollHeight&&u!==E?(this.yPane.hide(),this.$el.removeClass("has-scrollbar-y"),this.isActiveY=!1):this.el.clientHeight===e.scrollHeight&&u===E?this.ySlider.hide():this.ySlider.show(),this.xPane.show(),this.isActiveX=!0,e.scrollWidth===e.clientWidth||this.xPane.outerWidth(!0)>=e.scrollWidth&&o!==E?(this.xPane.hide(),this.$el.removeClass("has-scrollbar-x"),this.isActiveX=!1):this.el.clientWidth===e.scrollWidth&&o===E?this.xSlider.hide():this.xSlider.show(),this.yPane.css({opacity:this.options.alwaysVisible?1:"",visibility:this.options.alwaysVisible?"visible":""}),this.xPane.css({opacity:this.options.alwaysVisible?1:"",visibility:this.options.alwaysVisible?"visible":""}),this},f.prototype.scroll=function(){return this.scrollY()},f.prototype.scrollY=function(){if(!this.isActiveY)return;return this.ySliderY=Math.max(0,this.ySliderY),this.ySliderY=Math.min(this.maxSliderTop,this.ySliderY),this.$content.scrollTop((this.yPaneHeight-this.contentHeight+s)*this.ySliderY/this.maxSliderTop*-1),this.iOSNativeScrolling||this.ySlider.css({top:this.ySliderY}),this},f.prototype.scrollX=function(){if(!this.isActiveX)return;return this.xSliderX=Math.max(0,this.xSliderX),this.xSliderX=Math.min(this.maxSliderLeft,this.xSliderX),this.$content.scrollLeft((this.xPaneWidth-this.contentWidth+i)*this.xSliderX/this.maxSliderLeft*-1),this.iOSNativeScrolling||this.xSlider.css({left:this.xSliderX}),this},f.prototype.scrollBottom=function(e){if(!this.isActiveY)return;return this.reset(),this.$content.scrollTop(this.contentHeight-this.$content.height()-e).trigger(v),this},f.prototype.scrollRight=function(e){if(!this.isActiveX)return;return this.reset(),this.$content.scrollLeft(this.contentWidth-this.$content.width()-e).trigger(v),this},f.prototype.scrollTop=function(e){if(!this.isActiveY)return;return this.reset(),this.$content.scrollTop(+e).trigger(v),this},f.prototype.scrollLeft=function(e){if(!this.isActiveX)return;return this.reset(),this.$content.scrollLeft(+e).trigger(v),this},f.prototype.scrollTo=function(t){var n;if(!this.isActiveY&&!this.isActiveX)return;return this.reset(),n=e(t).get(0),this.isActiveY&&this.scrollTop(n.offsetTop),this.isActiveX&&this.scrollLeft(n.offsetLeft),this},f.prototype.stop=function(){return this.stopped=!0,this.removeEvents(),this.yPane.hide(),this.xPane.hide(),this},f.prototype.flash=function(){var e=this;if(!this.isActiveY&&!this.isActiveX)return;return this.reset(),this.isActiveY&&this.yPane.addClass("flashed"),this.isActiveX&&this.xPane.addClass("flashed"),setTimeout(function(){e.isActiveY&&e.yPane.removeClass("flashed"),e.isActiveX&&e.xPane.removeClass("flashed")},this.options.flashDelay),this},f}(),e.fn.nanoScroller=function(t){return this.each(function(){var n,r;(r=this.nanoscroller)||(t.paneClass&&(t.paneClassX||(t.paneClassX=""+t.paneClass+"-x"),t.paneClassY||(t.paneClassY=""+t.paneClass+"-y")),t.sliderClass&&(t.sliderClassX||(t.sliderClassX=""+t.sliderClass+"-x"),t.sliderClassY||(t.sliderClassY=""+t.sliderClass+"-y")),n=e.extend({},C,t),this.nanoscroller=r=new m(this,n));if(t&&typeof t=="object"){e.extend(r.options,t);if(t.scrollBottom)return r.scrollBottom(t.scrollBottom);if(t.scrollTop)return r.scrollTop(t.scrollTop);if(t.scrollRight)return r.scrollRight(t.scrollRight);if(t.scrollLeft)return r.scrollLeft(t.scrollLeft);if(t.scrollTo)return r.scrollTo(t.scrollTo);if(t.scroll==="bottom")return r.scrollBottom(0);if(t.scroll==="top")return r.scrollTop(0);if(t.scroll==="right")return r.scrollRight(0);if(t.scroll==="left")return r.scrollLeft(0);if(t.scroll&&t.scroll instanceof e)return r.scrollTo(t.scroll);if(t.stop)return r.stop();if(t.flash)return r.flash()}return r.reset()})}})(jQuery,window,document);