(function(){var c,e,d=function(a,b){return function(){return a.apply(b,arguments)}};c=this.jQuery;e=function(){function a(b){this.el=b;this.generate();this.createEvents();this.addEvents();this.reset()}a.prototype.createEvents=function(){return this.events={down:d(function(b){this.isDrag=!0;this.offsetY=b.clientY-this.slider.offset().top;this.pane.addClass("active");c(document).bind("mousemove",this.events.drag);c(document).bind("mouseup",this.events.up);return!1},this),drag:d(function(b){this.sliderY=
b.clientY-this.el.offset().top-this.offsetY;this.scroll();return!1},this),up:d(function(){this.isDrag=!1;this.pane.removeClass("active");c(document).unbind("mousemove",this.events.drag);c(document).unbind("mouseup",this.events.up);return!1},this),resize:d(function(){this.reset();return this.scroll()},this),panedown:d(function(b){this.sliderY=b.clientY-this.el.offset().top-0.5*this.sliderH;this.scroll();return this.events.down(b)},this),scroll:d(function(){if(!0!==this.isDrag)return this.slider.css({top:Math.floor(this.content[0].scrollTop/
this.content[0].scrollHeight*(this.paneH+5))})},this)}};a.prototype.addEvents=function(){c(window).bind("resize",this.events.resize);this.slider.bind("mousedown",this.events.down);this.pane.bind("mousedown",this.events.panedown);return this.content.bind("scroll",this.events.scroll)};a.prototype.removeEvents=function(){c(window).unbind("resize",this.events.resize);this.slider.unbind("mousedown",this.events.down);this.pane.unbind("mousedown",this.events.panedown);return this.content.unbind("scroll",
this.events.scroll)};a.prototype.getScrollbarWidth=function(){var b,a,c;a=document.createElement("div");a.style.position="absolute";a.style.width="100px";a.style.height="100px";a.style.overflow="scroll";document.body.appendChild(a);b=a.offsetWidth;c=a.scrollWidth;document.body.removeChild(a);return b-c};a.prototype.generate=function(){this.el.append('<div class="pane"><div class="slider"></div></div>');this.content=c(this.el.children()[0]);this.slider=this.el.find(".slider");this.pane=this.el.find(".pane");
this.scrollW=this.getScrollbarWidth();if(0===this.scrollbarWidth)this.scrollW=0;this.content.css({right:-this.scrollW+"px"});null!=c.browser.msie&&8>parseInt(c.browser.version)&&this.pane.hide()};a.prototype.reset=function(){if(!0===this.isDead)this.isDead=!1,this.pane.show(),this.addEvents();this.contentH=this.content[0].scrollHeight;this.paneH=this.pane.height();this.sliderH=this.paneH/this.contentH*this.paneH;this.scrollH=this.paneH-this.sliderH;this.slider.height(this.sliderH)};a.prototype.scroll=
function(){var a;if(0>this.sliderY)this.sliderY=0;if(this.sliderY>this.scrollH)this.sliderY=this.scrollH;a=this.paneH-this.contentH+this.scrollW;a=a*this.sliderY/this.scrollH;this.content.scrollTop(-a);return this.slider.css({top:this.sliderY})};a.prototype.scrollBottom=function(){this.reset();this.sliderY=this.scrollH;this.scroll()};a.prototype.scrollTop=function(){this.reset();this.sliderY=0;this.scroll()};a.prototype.stop=function(){this.isDead=!0;this.removeEvents();this.pane.hide()};return a}();
c.fn.nanoScroller=function(a){var b;a||(a={});b=this.data("scrollbar");if(void 0===b)b=new e(this,a),this.data({scrollbar:b});else return"bottom"===a.scroll?b.scrollBottom():"top"===a.scroll?b.scrollTop():!0===a.stop?b.stop():b.reset()}}).call(this);